<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta charset="utf-8">
    <!--使⽤X-UA-Compatible来设置IE浏览器兼容模式 最新的渲染模式-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--
    viewport表示⽤户是否可以缩放⻚⾯；
    width指定视区的逻辑宽度；
    device-width指示视区宽度应为设备的屏幕宽度；
    initial-scale指令⽤于设置Web⻚⾯的初始缩放⽐例
    initial-scale=1则将显示未经缩放的Web⽂档
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="#" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}">
    <script type="text/javascript" th:src="@{/jquery/jquery-3.6.3.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/ajaxfileupload.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script type="text/javascript">
           function onChangeFile(){
                $. ajaxFileUpload({
                    url:"/jiNiTaiMei/play.do",
                    data:{},
                    secureuri:false,
                    fileElementId:"ajaxFile",
                    type:"post",
                    dataType:"json",
                    success:function (data) {
                        /*alert(data[0]+"  "+data[1]);*/
                        var img=$("<img>");
                        img.attr("src",data.name);
                        img.attr("width","100px");
                        img.attr("height","100px");
                        $("#imgDiv").append(img);

                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(XMLHttpRequest.readyState +"&"+ XMLHttpRequest.status +"&"+ XMLHttpRequest.responseText);
                        alert("错误");
                    }
                });
            };

    </script>
</head>
<body>
<div th:replace="~{temp :: top}"></div>
<a th:href="@{/testIndex.do}">->图片上传测试</a>
    <div>
        <table class="table table-hover" >
            <td></td>
            <td><br><div id="imgDiv" style="width: 100px;height: 100px;margin: 20px;border-radius: 50px;overflow: hidden"></div><br><br>
                <input type="file" name="ajFile" id="ajaxFile" onchange="onChangeFile()">
                <span id="imgName"></span><br>
            </td>
        </table>

    </div>
</body>
</html>